"use strict";let ibConst={cookieChanged:"cookieChanged",engagebudShopDomain:"ebDomainName"};function loadScript(e,t=!1){let n=document.createElement("script");n.src=e,n.async=t,n.crossOrigin="",document.body.appendChild(n)}function loadScripts(e){e.forEach((e,t)=>loadScript(e,!1))}function addWidget(){let e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div");e.id="engagebud-container",t.id="engagebud-widget",n.id="engagebud-frame",e.append(t),e.append(n),document.body.append(e);let o=getParameterByName("shop",document.currentScript.src),i=new URL("https://widget.engagebud.co/js/v1/bundle.min.js");i.searchParams.append("shop",getParameterByName("shop")),setCookie(ibConst.engagebudShopDomain,o);loadScripts(["https://unpkg.com/react@18/umd/react.production.min.js","https://unpkg.com/react-dom@18/umd/react-dom.production.min.js",i.href])}function getParameterByName(e,t=window.location.href){e=e.replace(/[\[\]]/g,"\\$&");let n=RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),o=n.exec(t);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}function init(){if(document.getElementById("influencerbit-redeem-bar")){console.log("EB ALREADY HERE. Closing...");return}console.log("Engagebud Booting..."),cookieListener(),addWidget()}function setCookie(e,t,n){var o="";n||(n=60);var i=new Date;i.setTime(i.getTime()+864e5*n),o="; expires="+i.toUTCString(),document.cookie=e+"="+(t||"")+o+"; path=/"}function cookieListener(){try{!function e(t,n=1e3){let o=document.cookie;setInterval(()=>{let e=document.cookie;if(e!==o)try{t({oldValue:o,newValue:e})}finally{o=e}},n)}(({oldValue:e,newValue:t})=>{try{window.postMessage({name:"cookieChanged"},"*")}catch(n){console.log("CookieListenerError",n.message())}},1e3)}catch(e){console.error("FAILED TO START COOKIE LISTENER",e)}}init();